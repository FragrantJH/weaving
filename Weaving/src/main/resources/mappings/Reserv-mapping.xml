<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ReservDAO">

	<insert id="insertReserv" parameterType="reserv">
		INSERT INTO RESERVATION (
							  RESERV_ID,
							  ROOM_ID,
							  EMP_NO,
							  START_TIME,
							  END_TIME,
							  DESCRIPTION
							 
							  
							)
				    VALUES ( 
				             RESERV_SEQ.nextval,
				             #{roomId},
				             #{empNo},
				             to_date(#{startDate},'mm/dd/yyyy hh24:mi'),
				             to_date(#{endDate},'mm/dd/yyyy hh24:mi'),
				             #{description}
				        
				    )			    
	</insert>
	<update id="updateReserv" parameterType="reserv">
		UPDATE RESERVATION
		   SET ROOM_ID = #{roomID},
		   	   EMP_NO = #{empNo},
		   	   START_TIME = #{startTime},
		   	   END_TIME = #{endTime}	   	   
		 WHERE RESERV_ID = #{reservId}
	</update>
	
	<delete id="deleteReserv" parameterType="reserv">
		DELETE FROM RESERVATION
		 WHERE RESERV_ID = #{reservId}
	</delete>
	
	<select id="selectReservList" resultType="reserv">
		SELECT RESERV_ID,
		       ROOM_ID,
			   A.EMP_NO,
               B.EMP_NAME,
			   START_TIME,
			   END_TIME,
			   DESCRIPTION
		  FROM RESERVATION A JOIN EMPLOYEES B ON A.EMP_NO = B.EMP_NO ORDER BY RESERV_ID
		  		
	</select>
	
	<select id="selectReserv" parameterType="reserv" resultType="reserv">
		SELECT RESERV_ID,
			   ROOM_ID,
			   EMP_NO,
			   START_TIME,
			   END_TIME,	  
			   DESCRIPTION 
		  FROM RESERVATION
		 WHERE RESERV_ID = #{reservId}
	</select>
	
	<select id="selectReservTotalCnt" resultType="int">
		SELECT COUNT(*)
		  FROM RESERVATION
	</select>
</mapper>