<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ReservDAO">

	<insert id="insertReserv" parameterType="reserv">
		INSERT INTO RESERVATION (
							  RESERV_ID,
							  ROOM_ID,
							  EMP_NO,
							  START_TIME,
							  END_TIME,
							  DESCRIPTION
							 
							  
							)
				    VALUES ( 
				             #{reservId},
				             #{roomId},
				             #{empNo},
				             #{startTime},
				             #{endTime},
				             #{description}
				        
				    )			    
	</insert>
	<update id="updateReserv" parameterType="reserv">
		UPDATE RESERVATION
		   SET ROOM_ID = #{roomID},
		   	   ROOM_LOC = #{roomLoc},
		   	   ROOM_SIZE = #{roomSize}
		   	   ROOM_MAX = #{roomMax}		   	   
		 WHERE RESERV_ID = #{reservId}
	</update>
	
	<delete id="deleteRoom" parameterType="reserv">
		DELETE FROM ROOM
		 WHERE ROOM_ID = #{roomId}
	</delete>
	
	<select id="selectRoomList" parameterType="reserv" resultType="reserv">
		SELECT ROW_NUM,
		       ROOM_ID,
			   ROOM_NAME,
			   ROOM_LOC
			   ROOM_SIZE
			   ROOM_MAX
		  FROM (SELECT ROWNUM ROW_NUM ,
		  		A.* FROM (SELECT * 
		  		            FROM ROOM 
		  		          ORDER BY ROOM_ID) A ) B 
		  WHERE ROW_NUM BETWEEN #{first} AND #{last}
	</select>
	
	<select id="selectRoom" parameterType="reserv" resultType="reserv">
		SELECT ROOM_ID,
			   ROOM_NAME,
			   ROOM_LOC,
			   ROOM_SIZE,
			   ROOM_MAX			   
		  FROM ROOM 
		 WHERE ROOM_ID = #{roomId}
	</select>
	
	<select id="selectRoomTotalCnt" resultType="int">
		SELECT COUNT(*)
		  FROM ROOM
	</select>
</mapper>