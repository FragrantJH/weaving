<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="EmailDAO">


<insert id="insertEmail" parameterType="com.weaving.biz.email.EmailVO" >
INSERT INTO EMAIL(
EMAIL_ID,
FROM_EMAIL,
TO_EMAIL,
SUBJECT,
EMAIL_CONTENTS,
CHECK_TIME,
READ_CHECK,
EMP_NO
)
VALUES(
(select nvl(max(EMAIL_ID),0)+1 from email) ,
#{fromEmail},
#{toEmail},
#{subject},
#{emailContents},
sysdate,
#{readCheck},
#{empNo}

)

</insert>

<!-- 읽은 메일 갯수 체크 -->
<select id="mailReadCheck" parameterType="int" resultType="int">
		select count(decode(read_check,'0','1'))
		from email
		where emp_no = #{empNo}
</select>


<delete id="deleteMails_S">
		<![CDATA[
			DELETE FROM Email WHERE email_id = #{email_id}
			]]>
	</delete>
</mapper>